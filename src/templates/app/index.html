{% extends 'app/base.html' %}
{% load static %}
{% block body_block %}
	<h1>Project time report</h1>
	<p>Hello {{ user.username }} <a href="/logout">Logout</a></p>
	<p>
		<button type="button" data-bind="click: loadPreviousWeek, disable: dataLoadingInProgress"><< Previous week</button>
		<button type="button" data-bind="click: loadNextWeek, enable: allSubmitted() && !dataLoadingInProgress()">Next week >></button>
	</p>
	<table>
		<thead>
			<tr>
				<th>Project</th>
				<!-- ko if: projects()[0] -->
				<!-- ko foreach: projects()[0].timeentries -->
				<th data-bind="text: date"></th>
				<!-- /ko -->
				<!-- /ko -->
			</tr>
		</thead>
		<tbody data-bind="foreach: projects">
			<tr>
				<td data-bind="text: code + ' - ' + name"></td>
				<!-- ko foreach: $data.timeentries -->
				<td><input style="padding: 5px;" class="col_10 right" data-bind="value: hours, valueUpdate: 'keyup', disable: submitted() || $root.dataLoadingInProgress()"></td>
				<!-- /ko -->
			</tr>
		<tbody>
	</table>
	<p><button type="button" data-bind="click: submitUntilCurrentWeek, disable: dataLoadingInProgress">Submit</button></p>
	<img id="loading" style="display: none;" src="{% static "images/loader.gif" %}">
	<p data-bind="visible: showErrorMessage">Ooops! Sorry. Something went wrong while communicating with the server. Please try to <a href="/">refresh</a>
	the page to solve the problem. If that doesn't help <a href="mailto:johan.govers@gmail.com">let us know</a>.</p>
{% endblock %}